<!DOCTYPE html>
<html lang="my">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1QLCETT57V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-1QLCETT57V');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candy Floral</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #fffafb; padding: 20px; text-align: center; color: #444; }
        header { margin-bottom: 40px; }
        h1 { color: #d81b60; margin-bottom: 5px; }
        .sub-text { color: #888; font-size: 14px; }
        
        .catalog-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; max-width: 1200px; margin: 0 auto; }
        
        .product-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.05); position: relative; padding-bottom: 20px; transition: 0.3s; border: 1px solid #f0f0f0; }
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        
        .product-image { width: 100%; height: 280px; object-fit: cover; background-color: #f9f9f9; }
        
        .status-badge { position: absolute; top: 12px; right: 12px; padding: 6px 12px; border-radius: 20px; font-size: 11px; font-weight: bold; text-transform: uppercase; z-index: 1; }
        .available { background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
        .sold-out { background: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
        
        .product-info { padding: 15px; }
        
        /* CODE á€…á€¬á€œá€¯á€¶á€¸ - á€¡á€€á€¼á€®á€¸á€†á€¯á€¶á€¸á€”á€¾á€„á€·á€º á€¡á€‘á€„á€ºá€›á€¾á€¬á€¸á€†á€¯á€¶á€¸ */
        .product-code { 
            font-size: 18px; 
            color: #d81b60; 
            background: #fdf0f4; 
            display: inline-block;
            padding: 5px 15px;
            border-radius: 6px;
            font-weight: 800;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        /* Item Name - á€”á€Šá€ºá€¸á€”á€Šá€ºá€¸á€á€±á€¸á€•á€¼á€®á€¸ á€™á€¾á€­á€”á€ºá€á€±á€¬á€•á€¯á€¶á€…á€¶ */
        .product-name { 
            font-size: 13px; 
            margin: 5px 0; 
            color: #999; 
            font-weight: normal; 
            text-transform: uppercase;
        }

        /* á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸ - MMK á€–á€¼á€¯á€á€ºá€‘á€¬á€¸á€•á€¼á€®á€¸ á€•á€­á€¯á€€á€¼á€®á€¸á€á€±á€¬á€•á€¯á€¶á€…á€¶ */
        .price { 
            color: #333; 
            font-size: 22px; 
            margin-bottom: 20px; 
            font-weight: bold;
        }
        
        .order-btn { display: inline-block; padding: 12px 40px; background: #d81b60; color: white !important; text-decoration: none; border-radius: 25px; font-size: 14px; font-weight: bold; transition: 0.3s; }
        .order-btn:hover { background: #ad1457; }
        .disabled { background: #ccc; pointer-events: none; opacity: 0.7; }
        
        #loading { font-style: italic; color: #888; margin-top: 50px; }
    </style>
</head>
<body>

    <header>
        <h1>ğŸŒ¸ Candy Floral</h1>
        <p class="sub-text">Valentine's Day á€•á€”á€ºá€¸á€…á€Šá€ºá€¸á€œá€¾á€œá€¾á€œá€±á€¸á€á€½á€± á€›á€›á€¾á€­á€¡á€±á€¬á€„á€º á€¡á€á€¯á€•á€² á€–á€¯á€”á€ºá€¸á€†á€€á€º á€™á€¾á€¬á€šá€°á€‘á€¬á€¸á€œá€­á€¯á€€á€ºá€á€±á€¬á€·á€”á€±á€¬á€ºá‹</p>
    </header>

    <div id="catalog" class="catalog-container">
        <p id="loading">á€•á€”á€ºá€¸á€…á€Šá€ºá€¸á€•á€¯á€¶á€œá€±á€¸á€á€½á€± á€á€„á€ºá€”á€±á€•á€«á€á€šá€ºá‹ á€á€á€…á€±á€¬á€„á€·á€ºá€•á€±á€¸á€•á€«á€”á€±á€¬á€º...</p>
    </div>

<script>
    const sheetId = '1SDQaijpBd1TvVLLLSWf5HyBn8m_rB8HvFQkmPTpbzw0';
    const base = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=Sheet1`;

    fetch(base)
        .then(res => res.text())
        .then(data => {
            const temp = data.substring(47).slice(0, -2);
            const json = JSON.parse(temp);
            const rows = json.table.rows;
            let html = '';

            for (let i = 0; i < rows.length; i++) {
                const row = rows[i].c;
                if (!row || (row[1] && row[1].v === "Name")) continue;

                const id = row[0] ? row[0].v : 'N/A';
                const name = row[1] ? row[1].v : 'No Name';
                
                // á€ˆá€±á€¸á€”á€¾á€¯á€”á€ºá€¸á€€á€­á€¯ 3 digit á€á€­á€¯á€„á€ºá€¸ á€€á€±á€¬á€ºá€™á€¬á€‘á€Šá€·á€ºá€á€¼á€„á€ºá€¸á€”á€¾á€„á€·á€º MMK á€–á€šá€ºá€›á€¾á€¬á€¸á€á€¼á€„á€ºá€¸
                let rawPrice = row[2] ? row[2].v : 0;
                let formattedPrice = Number(rawPrice).toLocaleString();
                
                // Checkbox á€á€”á€ºá€–á€­á€¯á€¸á€€á€­á€¯ á€…á€…á€ºá€†á€±á€¸á€á€¼á€„á€ºá€¸ (TRUE á€–á€¼á€…á€ºá€›á€„á€º Available)
                const isAvailable = row[3] ? row[3].v === true : false;
                const statusText = isAvailable ? 'Available' : 'Sold Out';

                html += `
                    <div class="product-card">
                        <span class="status-badge ${isAvailable ? 'available' : 'sold-out'}">${statusText}</span>
                        <img src="${row[4] ? row[4].v : 'https://via.placeholder.com/400x300'}" class="product-image" onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                        <div class="product-info">
                            <div class="product-code">${id}</div>
                            <h3 class="product-name">${name}</h3>
                            <p class="price">${formattedPrice}</p>
                            ${isAvailable 
                                ? `<a href="tel:09676962015" class="order-btn">ğŸ“ á€–á€¯á€”á€ºá€¸á€†á€€á€º á€™á€¾á€¬á€šá€°á€›á€”á€º</a>` 
                                : `<a href="#" class="order-btn disabled">á€€á€¯á€”á€ºá€á€½á€¬á€¸á€•á€«á€•á€¼á€®</a>`}
                        </div>
                    </div>
                `;
            }
            document.getElementById('catalog').innerHTML = html;
        });
</script>
</body>
</html>
